import{_ as h,m as g,r as n,o as w,c as b,a as o,w as v,F as V,b as e,n as u,d as L}from"./index-ahOMgdsz.js";import{t as x}from"./ToastMessage-7DToXYU9.js";import{u as k}from"./toastStore-V2N45qjQ.js";var E={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"vuejs2024",BASE_URL:"/vite_week7_20240303/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:M}=E,y={data(){return{isLoading:!1,user:{username:"",password:""}}},components:{toastMessage:x},methods:{...g(k,["pushMessage"]),loginAdmin(){this.isLoading=!0,this.$http.post(`${M}/admin/signin`,this.user).then(i=>{this.isLoading=!1;const{token:s,expired:l}=i.data;document.cookie=`vite_week7=${s}; expires=${new Date(l)};`,this.$router.push("/admin/products")}).catch(i=>{this.pushMessage({style:"danger",title:"登入失敗",content:i.response.data.message})})},resetLogin(){this.$refs.form.resetForm()}}},A=e("h3",{class:"fw-bold fs-3 text-center"},"請登入",-1),F={class:"mb-3"},S={class:"form-floating"},R=e("label",{for:"email",class:"form-label"}," Email Address ",-1),T={class:"mb-3"},U={class:"form-floating"},B=e("label",{for:"password",class:"form-label"}," Password ",-1),C={class:"mb-3"},D={class:"d-flex gap-3"},P=e("button",{class:"btn btn-outline-primary w-100 fw-bold",type:"submit"}," 登入 ",-1);function I(i,s,l,q,t,r){const p=n("VLoading"),_=n("toastMessage"),d=n("VField"),m=n("error-message"),f=n("VForm");return w(),b(V,null,[o(p,{active:t.isLoading},null,8,["active"]),o(_),o(f,{action:"#",class:"mx-auto mt-5",style:{width:"20rem"},ref:"form",onSubmit:r.loginAdmin},{default:v(({errors:c})=>[A,e("div",F,[e("div",S,[o(d,{id:"email",name:"email",type:"email",class:u(["form-control",{"is-invalid":c.email}]),rules:"email|required",placeholder:"Email Address",modelValue:t.user.username,"onUpdate:modelValue":s[0]||(s[0]=a=>t.user.username=a),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),o(m,{name:"email",class:"invalid-feedback"}),R])]),e("div",T,[e("div",U,[o(d,{id:"password",name:"password",type:"password",class:u(["form-control",{"is-invalid":c.password}]),placeholder:"Password",rules:"required",modelValue:t.user.password,"onUpdate:modelValue":s[1]||(s[1]=a=>t.user.password=a)},null,8,["class","modelValue"]),o(m,{name:"password",class:"invalid-feedback"}),B])]),e("div",C,[e("div",D,[e("button",{class:"btn btn-outline-secondary w-100 fw-bold",type:"button",onClick:s[2]||(s[2]=L((...a)=>r.resetLogin&&r.resetLogin(...a),["prevent"]))}," 重置 "),P])])]),_:1},8,["onSubmit"])],64)}const j=h(y,[["render",I]]);export{j as default};
